<div align="center">

# Trellolite

–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π –∫–ª–æ–Ω Trello: –¥–æ—Å–∫–∏ ‚Üí —Å–ø–∏—Å–∫–∏ ‚Üí –∫–∞—Ä—Ç–æ—á–∫–∏, live‚Äë–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ SSE, drag‚Äëand‚Äëdrop –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ü–≤–µ—Ç–∞.

<p>
   <a href="https://www.postgresql.org/" target="_blank"><img alt="Postgres" src="https://img.shields.io/badge/Postgres-16-4169E1?logo=postgresql&logoColor=white"></a>
   <img alt="Go" src="https://img.shields.io/badge/Go-1.21+-00ADD8?logo=go&logoColor=white">
   <img alt="License" src="https://img.shields.io/badge/License-MIT-green">
   <img alt="Docker Compose" src="https://img.shields.io/badge/Docker-Compose-2496ED?logo=docker&logoColor=white">
</p>

</div>

## –û–±–∑–æ—Ä ‚ú®

Trellolite ‚Äî —É—á–µ–±–Ω—ã–π –∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å‚Äë–ø—Ä–æ–µ–∫—Ç, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π:
- –ß–∏—Å—Ç—ã–π backend –Ω–∞ Go + Postgres —Å –ø—Ä–æ—Å—Ç—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- –†–µ–∞–ª—å–Ω–æ–µ‚Äë–≤—Ä–µ–º—è —á–µ—Ä–µ–∑ Server‚ÄëSent Events (SSE) –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –±—Ä–æ–∫–µ—Ä–æ–≤
- –í–∞–Ω–∏–ª—å–Ω—ã–π frontend (–±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤): HTML5 DnD, <dialog>, —Ç—ë–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º—ã
- –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–∞–∑—Ä–µ–∂—ë–Ω–Ω–æ–π —Å–µ—Ç–∫–æ–π (sparse ints) –∏ –∞–≤—Ç–æ‚Äë–ø–µ—Ä–µ–ø–∞–∫–æ–≤–∫–æ–π
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –¥–æ—Å–æ–∫/—Å–ø–∏—Å–∫–æ–≤/–∫–∞—Ä—Ç–æ—á–µ–∫ —Å –±—ã—Å—Ç—Ä—ã–º –¥–∏–∞–ª–æ–≥–æ–º –≤—ã–±–æ—Ä–∞

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ üöÄ

- –î–æ—Å–∫–∏, —Å–ø–∏—Å–∫–∏, –∫–∞—Ä—Ç–æ—á–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–∞—Ä—Ç–æ—á–∫–∞–º
- Drag‚Äëand‚Äëdrop:
   - –ö–∞—Ä—Ç–æ—á–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Å–ø–∏—Å–∫–∞ –∏ –º–µ–∂–¥—É —Å–ø–∏—Å–∫–∞–º–∏
   - –°–ø–∏—Å–∫–∏ –≤–Ω—É—Ç—Ä–∏ –¥–æ—Å–∫–∏ –∏ –º–µ–∂–¥—É –¥–æ—Å–∫–∞–º–∏ (drag –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ –Ω–∞ –¥–æ—Å–∫—É –≤ —Å–∞–π–¥–±–∞—Ä–µ)
   - –î–æ—Å–∫–∏ –≤ —Å–∞–π–¥–±–∞—Ä–µ (–ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞)
- SSE‚Äë—Å–æ–±—ã—Ç–∏—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤–æ –≤—Å–µ—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞—Ö
- –í—ã–±–æ—Ä —Ü–≤–µ—Ç–∞ –¥–ª—è: –¥–æ—Å–∫–∏, —Å–ø–∏—Å–∫–∞, –∫–∞—Ä—Ç–æ—á–∫–∏ (–∏–∫–æ–Ω–∫–∞ –ø–∞–ª–∏—Ç—Ä—ã ‚Üí –¥–∏–∞–ª–æ–≥)
- –¢–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è/–∞–≤—Ç–æ —Ç–µ–º–∞ (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ)

## –°—Ç–µ–∫ üß∞

- Backend: Go 1.21+ (net/http, database/sql, pgx v5), –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ slog
- DB: Postgres 16
- Frontend: –≤–∞–Ω–∏–ª—å–Ω—ã–µ HTML/CSS/JS + EventSource, HTML5 Drag and Drop
- Runtime: Docker Compose, multi‚Äëstage —Å–±–æ—Ä–∫–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ üóÇÔ∏è

```
docker-compose.yml
Dockerfile
go.mod
README.md
server/
   api.go        // HTTP API –∏ SSE
   events.go     // –ø—Ä–æ—Å—Ç–æ–π EventBus (SSE)
   main.go       // –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
   models.go     // —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö/JSON
   store.go      // SQL, –º–∏–≥—Ä–∞—Ü–∏–∏, –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
web/
   index.html    // —Ä–∞–∑–º–µ—Ç–∫–∞, –¥–∏–∞–ª–æ–≥–∏, –∏–∫–æ–Ω–∫–∏
   styles.css    // —Ç–µ–º—ã, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, DnD‚Äë–ø–æ–¥—Å–≤–µ—Ç–∫–∏
   app.js        // –ª–æ–≥–∏–∫–∞ UI, API, SSE, DnD
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Docker) üê≥

–¢—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker (Desktop) –∏ Docker Compose.

```powershell
docker compose up -d --build
```

–û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:8080

–û—Å—Ç–∞–Ω–æ–≤–∫–∞:

```powershell
docker compose down
```

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —á–µ—Ä–µ–∑ Taskfile (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ go-task):

```powershell
task up    # —Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
task logs  # –ª–æ–≥–∏
task down  # –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
```

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ üíª

1) –ü–æ–¥–Ω–∏–º–∏—Ç–µ Postgres –∏–∑ compose –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:

```
postgres://postgres:postgres@localhost:5432/trellolite?sslmode=disable
```

2) –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ (–Ω—É–∂–µ–Ω Go):

```powershell
$env:DATABASE_URL = "postgres://postgres:postgres@localhost:5432/trellolite?sslmode=disable"
go run ./server
```

3) –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080

–ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∫–æ–ª–æ–Ω–æ–∫, –≤–∫–ª—é—á–∞—è color).

## API (–∫—Ä–∞—Ç–∫–æ) üì°

- Boards
   - GET /api/boards ‚Äî —Å–ø–∏—Å–æ–∫
   - POST /api/boards {title}
   - GET /api/boards/{id}, GET /api/boards/{id}/full
   - PATCH /api/boards/{id} {title?, color?}
   - POST /api/boards/{id}/move {new_index}
   - DELETE /api/boards/{id}
   - GET /api/boards/{id}/events ‚Äî SSE –ø–æ—Ç–æ–∫
- Lists
   - GET /api/boards/{id}/lists
   - POST /api/boards/{id}/lists {title}
   - PATCH /api/lists/{id} {title?, pos?, color?}
   - POST /api/lists/{id}/move {new_index, target_board_id?}
   - DELETE /api/lists/{id}
- Cards
   - GET /api/lists/{id}/cards
   - POST /api/lists/{id}/cards {title, description}
   - PATCH /api/cards/{id} {title?, description?, pos?, due_at?, color?}
   - POST /api/cards/{id}/move {target_list_id, new_index}
   - DELETE /api/cards/{id}
- Comments
   - GET /api/cards/{id}/comments
   - POST /api/cards/{id}/comments {body}

–û—Ç–≤–µ—Ç—ã ‚Äî JSON. –ù–∞ –æ—à–∏–±–∫–∏ ‚Äî { ok:false, error:"..." } –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π HTTP –∫–æ–¥.

## –°–æ–±—ã—Ç–∏—è SSE üîî

–ü–æ–¥–ø–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞: EventSource(`/api/boards/{id}/events`).

–ü—Ä–∏–º–µ—Ä—ã —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π: board.moved, board.updated, list.created|updated|deleted|moved, card.created|updated|deleted|moved, comment.created. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç UI –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ –ª–∏–±–æ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ç–∫—É –ø—Ä–∏ —Å–ª–æ–∂–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.

## DnD –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ üß≤

- –ü–æ–∑–∏—Ü–∏–∏ ‚Äî —Ä–∞–∑—Ä–µ–∂—ë–Ω–Ω—ã–µ —Ü–µ–ª—ã–µ (—à–∞–≥ 1000). –ü—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∞ ‚Äî —Ñ–æ–Ω–æ–≤–∞—è –ø–µ—Ä–µ-–Ω—É–º–µ—Ä–∞—Ü–∏—è –∏ –ø–æ–≤—Ç–æ—Ä –ø–æ–ø—ã—Ç–∫–∏.
- DnD —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º ¬´—Ç—è–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞ —Ö—ç–Ω–¥–ª¬ª –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ –∏ –¥–æ—Å–æ–∫, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏.
- –ü–µ—Ä–µ–Ω–æ—Å —Å–ø–∏—Å–∫–∞ –º–µ–∂–¥—É –¥–æ—Å–∫–∞–º–∏ ‚Äî –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ –Ω–∞ –¥–æ—Å–∫—É –≤ —Å–∞–π–¥–±–∞—Ä–µ.

## –¶–≤–µ—Ç–∞ üé®

–ò–∫–æ–Ω–∫–∞ –ø–∞–ª–∏—Ç—Ä—ã –Ω–∞ –¥–æ—Å–∫–∞—Ö, —Å–ø–∏—Å–∫–∞—Ö –∏ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞:
- –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–≤–æ—Ç—á–∏ + –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ü–≤–µ—Ç
- –°–±—Ä–æ—Å (–±–µ–∑ —Ü–≤–µ—Ç–∞)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ PATCH color; UI —Ä–∞—Å–∫—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è, –¥—Ä—É–≥–∏–µ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ SSE.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚öôÔ∏è

- ADDR ‚Äî –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `:8080`
- DATABASE_URL ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Postgres; –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è docker `postgres://postgres:postgres@db:5432/trellolite?sslmode=disable`

## –¢—ë–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ üåó

–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É (light/dark/auto). –•—Ä–∞–Ω–∏—Ç—Å—è –≤ localStorage.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ ‚úÖ

- –ü—Ä–∏ —Å–±–æ—Ä–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è multi‚Äëstage Docker; –±–∏–Ω–∞—Ä–Ω–∏–∫ –Ω–∞ distroless image
- –õ–æ–≥–∏ HTTP —Å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é (slog JSON)
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–∞ —Å—Ç–∞—Ä—Ç–µ (idempotent)

## –¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥ üõ†Ô∏è

- –û—à–∏–±–∫–∞ –≤–∏–¥–∞ `column "color" does not exist` ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞: –º–∏–≥—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–∏—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏.

```powershell
docker compose up -d --build
```

- –ü–æ—Ä—Ç 8080 –∑–∞–Ω—è—Ç ‚Äî –∑–∞–¥–∞–π—Ç–µ `ADDR`, –Ω–∞–ø—Ä–∏–º–µ—Ä `:8081`.

## –õ–∏—Ü–µ–Ω–∑–∏—è üìÑ

MIT. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –≤ —É—á–µ–±–Ω—ã—Ö –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ü–µ–ª—è—Ö.

